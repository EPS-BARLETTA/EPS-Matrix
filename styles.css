:root{
  --bg:#ffffff;
  --surface:#f9f9f9;
  --surface-2:#f1f1f1;
  --text:#1a1a1a;
  --text-muted:#606770;
  --border:#d8d8d8;
  --accent:#1976d2;
  --danger:#c62828;
  --btn-bg:#e9eef6;
  --btn-text:#1a1a1a;
  --input-bg:#ffffff;
  --input-text:#1a1a1a;
  --placeholder:#8a8f98;
  --green:#16a34a;
  --orange:#f97316;
  --red:#ef4444;
  --modal-scrim:rgba(7,12,32,.65);
  --terrain-0-bg:#f3d6d6;
  --terrain-1-bg:#d6f0e0;
  --terrain-2-bg:#f2eccb;
  --terrain-3-bg:#dcdaf0;
  --terrain-4-bg:#ecd6e8;
  --terrain-5-bg:#d6eaf3;
  --terrain-text:#1a1a1a;
  --action-primary:#2f6fed;
  --action-success:#2e7d32;
  --action-warning:#ef6c00;
  --action-danger:#c62828;
  --action-neutral:#e0e0e0;
  --on-primary:#ffffff;
  --on-success:#ffffff;
  --on-warning:#ffffff;
  --on-danger:#ffffff;
  --on-neutral:#1a1a1a;
  --panel:var(--surface);
  --line:var(--border);
  --navy:var(--text);
  --blue:var(--accent);
  --muted:var(--text-muted);
  font-family:"Inter","SF Pro Display",-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}
:root[data-theme="dark"]{
  --bg:#121212;
  --surface:#1e1e1e;
  --surface-2:#2a2a2a;
  --text:#f5f5f5;
  --text-muted:#c0c0c0;
  --border:#333333;
  --accent:#64b5f6;
  --danger:#ef5350;
  --btn-bg:#2a2f3a;
  --btn-text:#f5f5f5;
  --input-bg:#1e1e1e;
  --input-text:#f5f5f5;
  --placeholder:#a8adb7;
  --modal-scrim:rgba(0,0,0,.75);
  --terrain-0-bg:#5a2f2f;
  --terrain-1-bg:#2f5a44;
  --terrain-2-bg:#5a5530;
  --terrain-3-bg:#3a375a;
  --terrain-4-bg:#5a2f54;
  --terrain-5-bg:#2f4e5a;
  --terrain-text:#f5f5f5;
  --action-primary:#64b5f6;
  --action-success:#66bb6a;
  --action-warning:#ffa726;
  --action-danger:#ef5350;
  --action-neutral:#2a2a2a;
  --on-neutral:#f5f5f5;
}
*{box-sizing:border-box;}
body{margin:0;background:var(--bg);min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:24px;color:var(--text);--accent:var(--blue);transition:background .3s ease,color .3s ease;}
body.landing,body.hub,body.create-class{align-items:center;}
.themeToggle{position:fixed;top:20px;right:20px;border:none;border-radius:50%;width:48px;height:48px;background:var(--surface);box-shadow:0 15px 40px rgba(10,20,40,.15);font-size:1.5rem;cursor:pointer;z-index:90;color:var(--text);}
:root[data-theme="dark"] .themeToggle{box-shadow:0 15px 40px rgba(0,0,0,.35);}
.landingHero{width:min(1200px,100%);background:radial-gradient(circle at top,#f4f8ff,#eef2ff);border-radius:44px;padding:48px 64px;box-shadow:0 55px 120px rgba(15,30,72,.15);display:flex;gap:40px;align-items:center;position:relative;overflow:hidden;}
.landingHero::after{content:\"\";position:absolute;width:420px;height:420px;background:rgba(28,91,255,.2);filter:blur(120px);top:-140px;right:-120px;z-index:0;}
.heroCopy{flex:1;position:relative;z-index:1;text-align:left;}
.heroVisual{flex:0.9;display:flex;flex-direction:column;gap:18px;align-items:flex-end;position:relative;z-index:1;}
.heroBadge{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:#e0ecff;border-radius:999px;font-size:0.9rem;font-weight:600;color:var(--blue);}
.heroBadge::before{content:\"●\";color:#2563eb;}
.landingHero h1{font-size:clamp(2.8rem,5vw,4.6rem);margin:12px 0 20px;color:#0b1c47;}
.ctaRow{display:flex;gap:16px;margin:24px 0;}
.heroStats{display:flex;gap:24px;margin-top:12px;}
.heroStats div{background:#fff;border-radius:20px;padding:16px 18px;box-shadow:0 18px 50px rgba(15,30,72,.08);min-width:120px;text-align:center;}
.heroStats strong{font-size:1.8rem;display:block;color:#0b1c47;}
.heroStats span{color:var(--muted);font-size:0.85rem;}
.heroVisual .pill{padding:10px 18px;border-radius:999px;font-weight:600;color:#0f172a;box-shadow:0 15px 40px rgba(15,23,42,.12);}
.pill-blue{background:rgba(99,102,241,.2);}
.pill-green{background:rgba(16,185,129,.25);}
.heroCardPreview{background:#0c1b46;color:#fff;padding:28px;border-radius:28px;box-shadow:0 25px 80px rgba(12,27,70,.5);width:320px;}
.heroCardPreview p{margin:0 0 10px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:#9ab0ff;}
.heroCardPreview ul{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;}
.heroCardPreview li::before{content:\"▹\";margin-right:8px;color:#60a5fa;}
.card-full{background:var(--panel);border-radius:32px;width:min(1100px,100%);padding:48px;box-shadow:0 45px 120px rgba(12,38,85,.1);display:flex;flex-direction:column;gap:18px;text-align:center;color:var(--text);}
.heroCard{max-width:800px;margin:0 auto;align-items:center;}
.hubCard{max-width:900px;margin:0 auto;text-align:center;gap:32px;padding:48px 32px;}
.hubHeader h1{margin:0;font-size:3rem;}
.hubChoices{display:flex;flex-direction:column;gap:16px;align-items:center;}
.hubAction{display:inline-flex;justify-content:center;align-items:center;width:100%;max-width:420px;padding:18px 24px;border-radius:18px;font-size:1.2rem;font-weight:600;text-decoration:none;}
.hubAction.primary{background:var(--accent, #2563eb);color:#fff;border:none;}
.hubAction.secondary{border:2px solid var(--line);background:#fff;}
.hubIntro{max-width:620px;margin:0 auto;font-size:1rem;color:var(--muted);line-height:1.5;}
.helpLink{display:inline-flex;align-items:center;gap:6px;font-weight:600;}
.hubChoices{display:flex;flex-wrap:wrap;gap:18px;justify-content:center;}
.hubChoices .btn{min-width:220px;}
.cardSection{background:var(--surface);border:1px solid var(--line);border-radius:28px;padding:24px;box-shadow:0 25px 70px rgba(12,38,85,.08);color:var(--text);}
.sectionHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.notesLayout{display:flex;flex-direction:column;gap:24px;text-align:left;}
.notes .card-full{text-align:left;}
.stickiesBoard{min-height:160px;border:1px dashed var(--line);border-radius:22px;padding:16px;display:flex;flex-wrap:wrap;gap:14px;background:#fdfaf2;}
.sticky{width:180px;min-height:150px;border-radius:18px;padding:12px;box-shadow:0 12px 35px rgba(15,23,42,.15);display:flex;flex-direction:column;}
.sticky textarea{border:none;background:transparent;resize:vertical;min-height:100px;font-size:1rem;font-family:inherit;color:#0f172a;}
.sticky textarea:focus{outline:none;}
.stickyActions{display:flex;justify-content:flex-end;gap:6px;margin-top:8px;}
.stickyActions button{border:none;background:rgba(15,23,42,.2);color:#fff;border-radius:999px;padding:4px 8px;cursor:pointer;}
.stickiesBoard p{margin:0;color:var(--muted);}
.sketchToolbar{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:12px;margin:12px 0;}
.sketchTabs{display:flex;flex-wrap:wrap;gap:10px;}
.sketchTab{border:1px solid var(--line);border-radius:14px;padding:6px 14px;background:#f5f7ff;font-weight:600;color:var(--navy);cursor:pointer;transition:.2s;}
.sketchTab.active{background:var(--blue);color:#fff;border-color:var(--blue);box-shadow:0 8px 20px rgba(28,91,255,.25);}
.sketchOptions{display:flex;flex-direction:column;gap:12px;margin-bottom:10px;}
.sketchToolsRow{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
.sketchToolButtons .btn{min-width:110px;}
.sketchToolButtons .btn.active{background:var(--blue);color:#fff;}
.sketchPalettes{display:flex;flex-wrap:wrap;gap:20px;align-items:flex-start;}
.smallTitle{font-size:0.8rem;margin:0 0 6px;text-transform:uppercase;letter-spacing:.08em;}
.sketchPalette,.sketchSizes{display:flex;gap:10px;flex-wrap:wrap;}
.sketchPalette button{width:32px;height:32px;border-radius:50%;border:2px solid transparent;cursor:pointer;}
.sketchPalette button.active{border-color:#00000088;box-shadow:0 0 0 3px rgba(0,0,0,.1);}
.sketchSizes button{border-radius:999px;padding:6px 12px;border:1px solid var(--line);background:#f5f7ff;font-weight:600;cursor:pointer;}
.sketchSizes button.active{background:var(--blue);color:#fff;border-color:var(--blue);}
.sketchActions .btn.hidden{display:none;}
.sketchToolbar.floating,
.sketchOptions.floating{position:fixed;left:24px;right:24px;z-index:140;background:rgba(15,23,42,.08);backdrop-filter:blur(12px);border-radius:20px;padding:12px 20px;box-shadow:0 25px 80px rgba(5,10,25,.35);}
.sketchToolbar.floating{top:20px;}
.sketchOptions.floating{top:110px;max-width:calc(100% - 48px);}
.sketchShell{border:1px solid var(--line);border-radius:24px;padding:12px;background:#f8fbff;position:relative;z-index:1;}
.sketchShell.fullscreen{position:fixed;inset:24px;z-index:120;background:#010a1c;border-radius:32px;padding:24px;box-shadow:0 35px 120px rgba(0,0,0,.6);}
.sketchShell canvas{width:100%;height:360px;display:block;border-radius:18px;background:#fff;touch-action:none;}
.sketchShell.fullscreen canvas{height:calc(100vh - 180px);}
body.sketch-fullscreen{overflow:hidden;}
:root[data-theme="dark"] .sketchTab{background:rgba(15,23,42,.65);border-color:#273555;color:#cbd5f5;}
:root[data-theme="dark"] .sketchTab.active{background:#2563eb;border-color:#2563eb;box-shadow:0 12px 30px rgba(37,99,235,.45);}
:root[data-theme="dark"] .sketchShell{background:#0f1b36;}
:root[data-theme="dark"] .sketchShell.fullscreen{background:#010417;}
:root[data-theme="dark"] .sketchSizes button{background:rgba(15,23,42,.65);border-color:#273555;color:#cbd5f5;}
:root[data-theme="dark"] .sketchSizes button.active{background:#2563eb;border-color:#2563eb;color:#fff;}
:root[data-theme="dark"] .sketchPalette button.active{border-color:#93c5fd;box-shadow:0 0 0 3px rgba(147,197,253,.25);}
h1{font-size:clamp(2.5rem,6vw,4rem);margin:0;}
.lead{color:#4a5c8a;font-size:1.1rem;margin:0;}
.manualBlocks{display:flex;flex-direction:column;gap:14px;margin:20px 0;}
.manualBlock{border-radius:20px;padding:16px 18px;border:1px solid var(--line);background:var(--surface);color:var(--text);}
.manualBlock[data-tone="blue"]{background:rgba(125,157,255,.15);}
.manualBlock[data-tone="green"]{background:rgba(74,222,128,.18);}
.manualBlock[data-tone="orange"]{background:rgba(251,191,36,.18);}
.manualBlock[data-tone="pink"]{background:rgba(244,114,182,.18);}
.manualBlock h3{margin:0 0 6px;font-size:1.05rem;color:var(--navy);}
.manualBlock p{margin:0;color:var(--muted);line-height:1.4;}
.manualBlock ul{margin:0;padding-left:18px;color:var(--muted);}
:root[data-theme="dark"] .manualBlock{background:rgba(16,25,53,.9);}
.highlights{list-style:none;margin:12px 0;padding:0;color:#4a5c8a;display:flex;flex-direction:column;gap:6px;}
.highlights li::before{content:"•";margin-right:8px;color:var(--blue);}
.actions{margin-top:12px;}
.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:16px;font-weight:600;font-size:1rem;text-decoration:none;transition:.2s;background:var(--btn-bg);color:var(--btn-text);border:1px solid transparent;}
.btn-primary,
.btn.primary{background:var(--action-primary);color:var(--on-primary);box-shadow:0 10px 30px rgba(47,111,237,.25);}
.btn-success,
.btn.success{background:var(--action-success);color:var(--on-success);}
.btn-warning,
.btn.warning{background:var(--action-warning);color:var(--on-warning);}
.btn-danger,
.btn.secondary.danger{background:var(--action-danger);color:var(--on-danger);}
.btn-neutral,
.btn.secondary{background:var(--action-neutral);color:var(--on-neutral);}
.btn-neutral.active,
.btn.secondary.active{box-shadow:0 0 0 2px rgba(0,0,0,.08);}
.btn:disabled{opacity:.4;pointer-events:none;}
.card{background:var(--panel);border-radius:28px;padding:32px;box-shadow:0 30px 90px rgba(12,38,85,.12);color:var(--text);} 
.formShell{background:var(--panel);border-radius:30px;padding:32px;box-shadow:0 35px 90px rgba(12,38,85,.12);text-align:left;display:flex;flex-direction:column;gap:20px;color:var(--text);}
.formGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;}
.formGrid label{display:flex;flex-direction:column;font-weight:600;color:var(--muted);gap:6px;}
.formGrid input,.formShell textarea{border:1px solid var(--line);border-radius:14px;padding:10px 12px;font-size:1rem;font-family:inherit;background:var(--input-bg);color:var(--input-text);}
.formShell textarea{min-height:160px;resize:vertical;}
.formShell select{border:1px solid var(--line);border-radius:14px;padding:10px 12px;font-size:1rem;font-family:inherit;background:#fff;}
header.app{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;margin-bottom:24px;}
header.app h2{margin:0;font-size:2rem;}
.navButtons{display:flex;flex-wrap:wrap;gap:12px;}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:24px;}
.statCard{background:#f7f9ff;border:1px solid var(--line);border-radius:20px;padding:16px;text-align:center;}
.statCard span{display:block;font-size:0.8rem;text-transform:uppercase;color:var(--muted);letter-spacing:.05em;}
.statCard strong{font-size:1.6rem;color:var(--navy);}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;}
#caGrid{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));}
.folder{background:var(--panel);border:1px solid var(--folder-soft,var(--line));border-radius:26px;padding:22px;display:flex;flex-direction:column;gap:10px;box-shadow:0 18px 60px rgba(15,30,72,.12);cursor:pointer;--accent:var(--folder-color,var(--blue));color:var(--text);}
.folderIcon{width:90px;height:66px;border-radius:20px;background:var(--folder-soft,rgba(28,91,255,.12));display:flex;align-items:center;justify-content:center;font-size:2rem;color:var(--folder-color,var(--blue));}
.folderTitle{font-size:1.2rem;font-weight:700;color:var(--folder-color,var(--navy));} 
.folderMeta{color:var(--muted);}
.folderActions{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px;}
.caList{display:flex;flex-direction:column;gap:8px;margin-top:10px;}
.caItem{background:#f6f8ff;border:1px solid #dbe4ff;border-radius:14px;padding:10px;display:flex;justify-content:space-between;align-items:center;gap:10px;}
.caItem span{font-weight:600;color:var(--navy);}
.tableWrapper{overflow:auto;border-radius:22px;border:1px solid var(--line);background:var(--surface);}
table{width:100%;border-collapse:separate;border-spacing:0;}
thead th{position:sticky;top:0;background:var(--surface-2);border-bottom:2px solid var(--line);padding:8px;font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:.05em;}
tbody td{padding:8px;border-bottom:1px solid var(--line);} 
table input,table textarea{width:100%;border:1px solid var(--line);border-radius:8px;padding:4px 6px;font-size:0.9rem;font-family:inherit;background:var(--input-bg);color:var(--input-text);}
table textarea{min-height:40px;resize:vertical;}
input::placeholder,
textarea::placeholder{color:var(--placeholder);opacity:1;}
select{background:var(--input-bg);color:var(--input-text);border:1px solid var(--line);}
.nameCell{display:flex;align-items:center;justify-content:space-between;gap:12px;min-width:190px;}
.studentName{font-weight:600;}
.presenceBadges{display:flex;gap:6px;}
.presenceToggle{border:1px solid var(--line);background:var(--btn-bg);color:var(--text);font-weight:700;font-size:0.7rem;padding:2px 8px;border-radius:999px;cursor:pointer;transition:.2s;}
.presenceToggle.abs.active{background:rgba(239,68,68,.2);border-color:#ef4444;color:#991b1b;}
.presenceToggle.disp.active{background:rgba(251,191,36,.25);border-color:#f59e0b;color:#92400e;}
:root[data-theme="dark"] .presenceToggle.abs.active{color:#fecaca;}
:root[data-theme="dark"] .presenceToggle.disp.active{color:#fde68a;}
.groupPicker{width:auto;min-width:70px;max-width:110px;border:1px solid var(--line);border-radius:8px;padding:4px 6px;background:var(--input-bg);font-weight:600;text-align:center;color:var(--input-text);}
tbody tr.grouped td{background:var(--group-bg);}
tbody tr.groupStart td{border-top:4px solid var(--group-sep);}
tbody tr.isDispense td{background:#f1f5f9;color:#64748b;}
tbody tr.isAbsent td{background:#e2e8f0;color:#475569;}
:root[data-theme="dark"] tbody tr.isDispense td{background:#1f2a44;color:#a3b2d8;}
:root[data-theme="dark"] tbody tr.isAbsent td{background:#162033;color:#cad3f1;}
:root[data-theme="dark"] .formShell{background:#0f1b36;box-shadow:0 35px 120px rgba(0,0,0,.55);color:#e2e8ff;}
:root[data-theme="dark"] .formShell input,
:root[data-theme="dark"] .formShell textarea,
:root[data-theme="dark"] .formShell select{background:#14213d;color:#e2e8ff;border-color:#273555;}
:root[data-theme="dark"] .formGrid label{color:#c7d2fe;}
.status{font-weight:600;}
.status.success{color:#15803d;}
.status.warning{color:#b45309;}
.status.danger{color:#b91c1c;}
.terrainPanel{border:1px solid var(--line);border-radius:24px;padding:24px;display:flex;flex-direction:column;gap:18px;text-align:left;background:var(--surface);color:var(--text);}
.terrainPanelHeader{display:flex;flex-wrap:wrap;gap:16px;align-items:center;justify-content:space-between;}
.terrainToggleRow{display:flex;align-items:center;gap:12px;flex-wrap:wrap;}
.modeButtonGroup{display:flex;gap:10px;flex-wrap:wrap;}
.modeSwitch{min-width:180px;}
.modeSwitch.ghost{opacity:.6;}
.modeSwitch.active{background:var(--blue);color:#fff;}
#terrainModeHint{margin:0;}
.modeSoon{margin:0;color:var(--blue);font-weight:600;}
.modeSoon.hidden{display:none;}
.terrainConfig{display:flex;align-items:center;gap:12px;flex-wrap:wrap;}
.terrainConfig label{font-weight:600;color:var(--muted);display:flex;align-items:center;gap:8px;}
.terrainConfig input{width:90px;border:1px solid var(--line);border-radius:10px;padding:6px 8px;font-family:inherit;}
.terrainGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:16px;}
.terrainGrid.inset{opacity:.35;pointer-events:none;}
.terrainContent.hidden{display:none;}
.modePlaceholderCard{border:1px solid var(--line);border-radius:16px;padding:12px 16px;text-align:left;display:inline-flex;flex-direction:row;align-items:center;gap:10px;background:var(--surface-2);color:var(--text-muted);margin-top:12px;max-width:280px;}
.placeholderIcon{font-size:1.4rem;}
.terrainMatches{margin-top:24px;border:1px solid var(--line);border-radius:24px;padding:20px;background:var(--surface);color:var(--text);}
.terrainCard{border:1px solid var(--line);border-radius:18px;padding:16px;background:var(--surface);display:flex;flex-direction:column;gap:10px;box-shadow:0 10px 30px rgba(15,23,42,.08);color:var(--text);}
.terrainCard.compact{gap:6px;}
.terrainCard header{display:flex;align-items:center;justify-content:space-between;gap:10px;}
.terrainCard h3{margin:0;font-size:1rem;}
.terrainIndex{font-weight:600;color:var(--muted);}
.terrainLabel{margin:0;font-size:0.75rem;text-transform:uppercase;letter-spacing:.08em;color:var(--muted);}
.terrainChipList{display:flex;flex-wrap:wrap;gap:8px;}
.terrainChip{padding:6px 12px;border-radius:14px;background:#eef2ff;font-weight:600;font-size:0.85rem;}
.terrainChip.ref{background:#dbeafe;color:#1d4ed8;}
.terrainChip.empty{background:#f1f5f9;color:#94a3b8;font-weight:500;}
.terrainChip .terrainNoteBadge{margin-left:6px;font-size:0.85rem;}
.terrainCard[data-terrain-color="0"]{background:var(--terrain-0-bg);color:var(--terrain-text);}
.terrainCard[data-terrain-color="1"]{background:var(--terrain-1-bg);color:var(--terrain-text);}
.terrainCard[data-terrain-color="2"]{background:var(--terrain-2-bg);color:var(--terrain-text);}
.terrainCard[data-terrain-color="3"]{background:var(--terrain-3-bg);color:var(--terrain-text);}
.terrainCard[data-terrain-color="4"]{background:var(--terrain-4-bg);color:var(--terrain-text);}
.terrainCard[data-terrain-color="5"]{background:var(--terrain-5-bg);color:var(--terrain-text);}
.terrainCard[data-terrain-color] .terrainStudentMeta,
.terrainCard[data-terrain-color] .terrainLabel{color:var(--terrain-text);opacity:.85;}
.badge.ref{background:#dbeafe;color:#1d4ed8;}
.terrainList{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;}
.terrainList .badge{margin-left:6px;padding:2px 8px;border-radius:999px;font-size:0.7rem;background:#e0e7ff;color:#312e81;}
.terrainList .badge.warning{background:#fef3c7;color:#92400e;}
.terrainList .badge.muted{background:#e2e8f0;color:#475569;}
.smallText{font-size:0.85rem;}
.terrainCell{min-width:120px;}
.terrainCell select{width:100%;border:1px solid var(--line);border-radius:10px;padding:4px 6px;font-family:inherit;background:#fff;}
.terrainCell select:disabled{opacity:.6;}
.terrainNoteButton{border:none;background:rgba(15,23,42,.08);border-radius:10px;padding:4px 8px;margin-left:8px;cursor:pointer;}
.terrainNoteButton:hover{background:rgba(15,23,42,.15);}
.terrainStudentList{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:10px;}
.terrainStudent{display:flex;align-items:flex-start;justify-content:space-between;gap:12px;padding:10px;border:1px solid var(--line);border-radius:12px;background:#f8faff;}
.terrainStudentMeta{display:block;font-size:0.8rem;color:var(--muted);}
.terrainStudentBadges .badge{margin-left:6px;padding:2px 10px;border-radius:999px;background:#dbeafe;color:#1d4ed8;font-size:0.75rem;}
.terrainDetail{margin-top:16px;border:1px solid var(--line);border-radius:20px;padding:18px;background:#fff;display:flex;flex-direction:column;gap:12px;}
.terrainDetailHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
.terrainDetailNav{display:flex;gap:8px;flex-wrap:wrap;}
.terrainDetailPlayers{display:flex;flex-direction:column;gap:10px;}
.terrainDetailRow{display:flex;align-items:center;justify-content:space-between;gap:14px;padding:12px;border:1px solid var(--line);border-radius:14px;background:#f6f8ff;}
.terrainDetailRowActions{display:flex;gap:8px;align-items:center;}
.terrainDetailRowActions button{border:1px solid var(--line);border-radius:10px;padding:6px 12px;background:#fff;font-weight:600;cursor:pointer;}
.terrainDetailRowActions button.active{background:var(--blue);color:#fff;border-color:var(--blue);}
.terrainScoreField{display:flex;flex-direction:column;font-weight:600;color:var(--muted);gap:6px;}
.terrainScoreField input{border:1px solid var(--line);border-radius:10px;padding:8px 12px;font-family:inherit;}
.terrainMatches ul{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;}
.resultsPanel{border:1px solid var(--line);border-radius:24px;padding:20px;background:var(--surface);text-align:left;color:var(--text);}
.resultsPanel .sectionHeader{margin-bottom:12px;}
.resultsPanel tbody tr{cursor:pointer;}
.studentSummaryStats{display:grid;grid-template-columns:repeat(auto-fit,minmax(120px,1fr));gap:12px;margin:12px 0;}
.studentSummaryStats div{border:1px solid var(--line);border-radius:14px;padding:12px;text-align:center;background:#f5f7ff;}
.studentSummaryStats span{display:block;font-size:0.8rem;color:var(--muted);text-transform:uppercase;letter-spacing:.08em;}
.studentSummaryStats strong{font-size:1.4rem;color:var(--navy);}
.studentMatches ul{list-style:none;margin:10px 0 0;padding:0;display:flex;flex-direction:column;gap:8px;}
.studentMatches li{border-bottom:1px solid var(--line);padding:8px 0;font-size:0.95rem;}
.resultTag{display:inline-flex;align-items:center;padding:2px 10px;border-radius:999px;font-size:0.75rem;font-weight:600;margin-left:8px;}
.resultTag.win{background:#d1fae5;color:#065f46;}
.resultTag.loss{background:#fee2e2;color:#991b1b;}
.rotationPanel{border:1px solid var(--line);border-radius:24px;padding:20px;background:var(--surface);text-align:left;color:var(--text);}
.rotationMatches{display:flex;flex-direction:column;gap:12px;}
.rotationPanel .rotationActions{display:flex;gap:10px;flex-wrap:wrap;align-items:center;}
.rotationReadyPopup{position:fixed;right:24px;bottom:24px;z-index:95;max-width:360px;}
.rotationReadyPopup .popupCard{background:var(--panel);border-radius:22px;padding:18px 20px;box-shadow:0 18px 50px rgba(5,10,25,.35);border:1px solid var(--line);display:flex;flex-direction:column;gap:14px;}
.rotationReadyPopup .popupActions{display:flex;gap:10px;flex-wrap:wrap;justify-content:flex-end;}
.rotationReadyPopup .tinyCaps{text-transform:uppercase;font-size:0.7rem;letter-spacing:.12em;margin:0 0 4px;color:var(--muted);}
.rotationReadyPopup.hidden{display:none;}
.rotationMatchCard{border:1px solid var(--line);border-left-width:8px;border-radius:18px;padding:16px;display:flex;flex-direction:column;gap:10px;background:var(--surface-2);color:var(--text);box-shadow:0 6px 18px rgba(0,0,0,.08);}
.rotationMatchCard[data-terrain-color="0"]{border-left-color:var(--terrain-0-bg);}
.rotationMatchCard[data-terrain-color="1"]{border-left-color:var(--terrain-1-bg);}
.rotationMatchCard[data-terrain-color="2"]{border-left-color:var(--terrain-2-bg);}
.rotationMatchCard[data-terrain-color="3"]{border-left-color:var(--terrain-3-bg);}
.rotationMatchCard[data-terrain-color="4"]{border-left-color:var(--terrain-4-bg);}
.rotationMatchCard[data-terrain-color="5"]{border-left-color:var(--terrain-5-bg);}
.rotationMatchCard.done{border-color:#bbf7d0;background:rgba(34,197,94,.15);}
.rotationMatchCard.locked{border-style:dashed;opacity:.6;}
.rotationMatchCard.pulse{animation:matchPulse .8s ease-in-out;}
@keyframes matchPulse{0%{box-shadow:0 0 0 rgba(59,130,246,0);transform:scale(1);}60%{box-shadow:0 0 0 10px rgba(59,130,246,0.25);transform:scale(1.01);}100%{box-shadow:0 0 0 rgba(59,130,246,0);transform:scale(1);}}
.rotationMatchExtras{display:flex;flex-direction:column;gap:6px;margin-top:6px;}
.rotationMatchExtras .forfeitToggle{font-size:0.9rem;color:var(--muted);display:flex;align-items:center;gap:6px;}
.rotationMatchExtras input[type="checkbox"]{width:18px;height:18px;}
.forfeitRadios{display:flex;flex-direction:column;gap:4px;padding-left:20px;}
.forfeitRadios.hidden{display:none;}
.forfeitRadios label{font-size:0.85rem;color:var(--muted);display:flex;align-items:center;gap:6px;}
.helpShell{gap:24px;max-width:1000px;}
.helpGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:16px;}
.helpCard{border-radius:20px;padding:0;background:#f8fafc;box-shadow:0 10px 30px rgba(15,23,42,0.08);display:flex;flex-direction:column;overflow:hidden;transition:transform .2s ease;}
.helpCardButton{border:none;background:transparent;font-size:1.15rem;font-weight:700;padding:20px 24px;text-align:left;cursor:pointer;width:100%;}
.helpCardButton:focus-visible{outline:3px solid rgba(59,130,246,.4);outline-offset:4px;}
.helpCard .helpContent{padding:0 24px 20px;font-size:0.95rem;color:#0f172a;line-height:1.4;border-top:1px dashed rgba(15,23,42,.12);}
.helpCard .helpContent ol,
.helpCard .helpContent ul{margin:12px 0;padding-left:20px;display:flex;flex-direction:column;gap:6px;}
.helpCard .helpContent ul{list-style:disc;}
.helpCard .helpContent li strong{font-weight:600;}
.helpCard.open{transform:translateY(-2px);}
.helpCard:not(.open) .helpContent{display:none;}
.helpCard[data-tone="blue"]{background:#dbeafe;}
.helpCard[data-tone="green"]{background:#d1fae5;}
.helpCard[data-tone="orange"]{background:#ffedd5;}
.helpCard[data-tone="pink"]{background:#fce7f3;}
.helpCard[data-tone="teal"]{background:#ccfbf1;}
.helpCard[data-tone="purple"]{background:#ede9fe;}
.helpCard[data-tone="red"]{background:#fee2e2;}
.helpCard[data-tone="indigo"]{background:#e0e7ff;}
.helpCard[data-tone="yellow"]{background:#fef9c3;}
.helpCard[data-tone="gray"]{background:#e2e8f0;}
.helpCard[data-tone="brown"]{background:#f3e8ff;}
.helpCard[data-tone="aqua"]{background:#bae6fd;}
.rotationMatchHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.rotationMatchTeams{display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px;}
.rotationMatchTeams .scoreInput{display:flex;align-items:center;gap:8px;}
.scoreInput{display:flex;align-items:center;gap:8px;}
.scoreInput input{width:4.8rem;text-align:center;border:1px solid var(--line);border-radius:12px;padding:6px 6px;font-size:1.05rem;font-family:inherit;font-weight:600;}
.scoreInput input:disabled{opacity:.7;background:#ecfccb;border-color:#bbf7d0;}
.rotationMatchFooter{display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap;}
.rotationMatchActions{display:flex;gap:8px;flex-wrap:wrap;}
.btn.tiny{padding:8px 14px;font-size:0.85rem;border-radius:12px;}
.rotationMatchMeta{font-size:0.9rem;color:var(--muted);}
.rotationMatchEmpty{padding:12px;border:1px dashed var(--line);border-radius:16px;text-align:center;color:var(--muted);}
.modal{position:fixed;inset:0;background:var(--modal-scrim);display:flex;align-items:center;justify-content:center;padding:20px;z-index:99;}
.modalCard{background:var(--panel);border-radius:28px;padding:28px;width:min(820px,100%);max-height:90vh;overflow:auto;box-shadow:0 35px 120px rgba(10,20,40,.45);color:var(--navy);}
.modalCard.large{width:min(960px,100%);}
.modalHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.iconButton{border:none;background:rgba(15,23,42,.08);width:40px;height:40px;border-radius:50%;font-size:1.4rem;cursor:pointer;color:var(--muted);}
.iconButton:hover{background:rgba(15,23,42,.15);}
.criteriaList{display:flex;flex-direction:column;gap:12px;margin-top:12px;}
.criteriaCard{border:1px solid var(--line);border-radius:18px;padding:16px;text-align:left;background:#fdfdff;}
.criteriaCard input,.criteriaCard select,.criteriaCard textarea{width:100%;border:1px solid var(--line);border-radius:12px;padding:8px 10px;font-size:0.95rem;}
.criteriaCard textarea{min-height:60px;}
.criteriaHeader{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px;}
.baseFieldsPanel{text-align:left;margin:12px 0;}
.baseFieldsPanel h3{margin:0 0 6px;font-size:1rem;color:var(--muted);}
.baseFieldGrid{display:flex;flex-wrap:wrap;gap:8px;}
.baseFieldItem{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:14px;border:1px solid var(--line);background:#f5f7ff;font-weight:600;color:var(--navy);}
.baseFieldGrid p{margin:6px 0 0;width:100%;color:var(--muted);font-size:0.9rem;}
.baseFieldItem input{width:auto;}
.baseFieldCell{white-space:nowrap;}
.baseFieldSelect{width:9.5rem;max-width:9.5rem;min-width:9.5rem;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;}
@media (max-width:640px){
  .baseFieldSelect{width:8.2rem;max-width:8.2rem;min-width:8.2rem;}
}
.scoreRow{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:6px 0;}
.scoreRow input{max-width:100px;text-align:center;}
.levelSelect{width:100%;border-radius:10px;padding:4px 8px;border:1px solid var(--line);background:#fff;transition:.2s ease;color:var(--navy);}
.levelSelect[data-level=\"peak\"]{background:#064e3b;color:#ecfdf5;border-color:#15803d;}
.levelSelect[data-level=\"mid\"]{background:#dcfce7;color:#065f46;border-color:#86efac;}
.levelSelect[data-level=\"warn\"]{background:#fff7ed;color:#9a3412;border-color:#fdba74;}
.levelSelect[data-level=\"low\"]{background:#fee2e2;color:#991b1b;border-color:#fca5a5;}
.levelSelect[data-level=\"\"]{background:#fff;color:var(--navy);border-color:var(--line);}
:root[data-theme=\"dark\"] .levelSelect{background:rgba(15,23,42,.6);color:#e2e8ff;border-color:#273555;}
:root[data-theme=\"dark\"] .levelSelect[data-level=\"peak\"]{background:#14532d;color:#bbf7d0;border-color:#22c55e;}
:root[data-theme=\"dark\"] .levelSelect[data-level=\"mid\"]{background:#064e3b;color:#d1fae5;border-color:#059669;}
:root[data-theme=\"dark\"] .levelSelect[data-level=\"warn\"]{background:#7c2d12;color:#fed7aa;border-color:#ea580c;}
:root[data-theme=\"dark\"] .levelSelect[data-level=\"low\"]{background:#7f1d1d;color:#fecaca;border-color:#ef4444;}
.levelSelect:focus{outline:2px solid var(--accent);}
.table-only header.app,.table-only .stats,.table-only .navButtons{display:none;}
.table-only .card-full{padding:12px;}
.hidden{display:none!important;}
.featureGrid{width:min(1200px,100%);margin:40px auto 0;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;}
.featureCard{background:#fff;border-radius:28px;padding:24px;text-align:left;border:1px solid rgba(12,38,85,.06);box-shadow:0 20px 60px rgba(12,38,85,.08);}
.featureCard h3{margin:0 0 8px;font-size:1.2rem;color:#0b1c47;}
.featureCard p{margin:0;color:var(--muted);}
:root[data-theme="dark"] .manualBlock[data-tone="blue"]{background:rgba(59,130,246,.2);}
:root[data-theme="dark"] .manualBlock[data-tone="green"]{background:rgba(34,197,94,.2);}
:root[data-theme="dark"] .manualBlock[data-tone="orange"]{background:rgba(234,179,8,.22);}
:root[data-theme="dark"] .manualBlock[data-tone="pink"]{background:rgba(236,72,153,.25);}
