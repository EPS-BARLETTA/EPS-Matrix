:root{
  --bg:#f2f2f7;
  --surface:#ffffff;
  --surface-2:#f7f7fb;
  --text:#1c1c1e;
  --text-muted:#6e6e73;
  --border:rgba(0,0,0,.08);
  --accent:#0a84ff;
  --success:#34c759;
  --danger:#ff3b30;
  --modal-scrim:rgba(0,0,0,.4);
  --shadow-soft:0 8px 24px rgba(0,0,0,.08);
  font-family:"SF Pro Display","Inter",-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
  /* legacy aliases */
  --panel:var(--surface);
  --line:var(--border);
  --navy:var(--text);
  --blue:var(--accent);
  --muted:var(--text-muted);
  --green:var(--success);
  --orange:#f97316;
  --red:var(--danger);
  --page-bg:var(--bg);
}
*{box-sizing:border-box;}
body{margin:0;background:var(--page-bg);min-height:100vh;display:flex;align-items:flex-start;justify-content:center;padding:24px;color:var(--navy);--accent:var(--blue);transition:background .3s ease,color .3s ease;}
body.landing,body.hub,body.create-class{align-items:center;}
.modeHintText{margin-top:10px;color:var(--text-muted);font-size:0.95rem;}
input,select,textarea{background:var(--surface);color:var(--text);border:1px solid var(--border);}
input::placeholder,textarea::placeholder{color:var(--text-muted);opacity:1;}
option{color:var(--text);background:var(--surface);}
.landingHero{width:min(1200px,100%);background:radial-gradient(circle at top,#f4f8ff,#eef2ff);border-radius:44px;padding:48px 64px;box-shadow:0 55px 120px rgba(15,30,72,.15);display:flex;gap:40px;align-items:center;position:relative;overflow:hidden;}
.landingHero::after{content:\"\";position:absolute;width:420px;height:420px;background:rgba(28,91,255,.2);filter:blur(120px);top:-140px;right:-120px;z-index:0;}
.heroCopy{flex:1;position:relative;z-index:1;text-align:left;}
.heroVisual{flex:0.9;display:flex;flex-direction:column;gap:18px;align-items:flex-end;position:relative;z-index:1;}
.heroBadge{display:inline-flex;align-items:center;gap:6px;padding:8px 16px;background:#e0ecff;border-radius:999px;font-size:0.9rem;font-weight:600;color:var(--blue);}
.heroBadge::before{content:\"●\";color:#2563eb;}
.landingHero h1{font-size:clamp(2.8rem,5vw,4.6rem);margin:12px 0 20px;color:#0b1c47;}
.ctaRow{display:flex;gap:16px;margin:24px 0;}
.heroStats{display:flex;gap:24px;margin-top:12px;}
.heroStats div{background:#fff;border-radius:20px;padding:16px 18px;box-shadow:0 18px 50px rgba(15,30,72,.08);min-width:120px;text-align:center;}
.heroStats strong{font-size:1.8rem;display:block;color:#0b1c47;}
.heroStats span{color:var(--muted);font-size:0.85rem;}
.heroVisual .pill{padding:10px 18px;border-radius:999px;font-weight:600;color:#0f172a;box-shadow:0 15px 40px rgba(15,23,42,.12);}
.pill-blue{background:rgba(99,102,241,.2);}
.pill-green{background:rgba(16,185,129,.25);}
.heroCardPreview{background:#0c1b46;color:#fff;padding:28px;border-radius:28px;box-shadow:0 25px 80px rgba(12,27,70,.5);width:320px;}
.heroCardPreview p{margin:0 0 10px;font-weight:600;letter-spacing:.08em;text-transform:uppercase;color:#9ab0ff;}
.heroCardPreview ul{list-style:none;margin:0;padding:0;display:flex;flex-direction:column;gap:6px;}
.heroCardPreview li::before{content:\"▹\";margin-right:8px;color:#60a5fa;}
.card-full{background:var(--panel);border-radius:32px;width:min(1100px,100%);padding:48px;box-shadow:0 45px 120px rgba(12,38,85,.15);display:flex;flex-direction:column;gap:18px;text-align:center;}
.heroCard{max-width:800px;margin:0 auto;align-items:center;}
.hubCard{max-width:900px;margin:0 auto;text-align:center;gap:32px;}
.hubChoices{display:flex;flex-wrap:wrap;gap:18px;justify-content:center;}
.hubChoices .btn{min-width:220px;}
.cardSection{background:#fdfdff;border:1px solid var(--line);border-radius:28px;padding:24px;box-shadow:0 25px 70px rgba(12,38,85,.08);}
.sectionHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.notesLayout{display:flex;flex-direction:column;gap:24px;text-align:left;}
.notes .card-full{text-align:left;}
.stickiesBoard{min-height:160px;border:1px dashed var(--line);border-radius:22px;padding:16px;display:flex;flex-wrap:wrap;gap:14px;background:#fdfaf2;}
.sticky{width:180px;min-height:150px;border-radius:18px;padding:12px;box-shadow:0 12px 35px rgba(15,23,42,.15);display:flex;flex-direction:column;}
.sticky textarea{border:none;background:transparent;resize:vertical;min-height:100px;font-size:1rem;font-family:inherit;color:#0f172a;}
.sticky textarea:focus{outline:none;}
.stickyActions{display:flex;justify-content:flex-end;gap:6px;margin-top:8px;}
.stickyActions button{border:none;background:rgba(15,23,42,.2);color:#fff;border-radius:999px;padding:4px 8px;cursor:pointer;}
.stickiesBoard p{margin:0;color:var(--muted);}
.sketchShell{border:1px solid var(--line);border-radius:24px;padding:12px;background:#f8fbff;}
.sketchShell canvas{width:100%;height:360px;display:block;border-radius:18px;background:#fff;touch-action:none;}
h1{font-size:clamp(2.5rem,6vw,4rem);margin:0;}
.lead{color:#4a5c8a;font-size:1.1rem;margin:0;}
.manualBlocks{display:flex;flex-direction:column;gap:14px;margin:20px 0;}
.manualBlock{border-radius:20px;padding:16px 18px;border:1px solid var(--line);background:rgba(255,255,255,.9);}
.manualBlock[data-tone="blue"]{background:rgba(125,157,255,.15);}
.manualBlock[data-tone="green"]{background:rgba(74,222,128,.18);}
.manualBlock[data-tone="orange"]{background:rgba(251,191,36,.18);}
.manualBlock[data-tone="pink"]{background:rgba(244,114,182,.18);}
.manualBlock h3{margin:0 0 6px;font-size:1.05rem;color:var(--navy);}
.manualBlock p{margin:0;color:var(--muted);line-height:1.4;}
.manualBlock ul{margin:0;padding-left:18px;color:var(--muted);}
.highlights{list-style:none;margin:12px 0;padding:0;color:#4a5c8a;display:flex;flex-direction:column;gap:6px;}
.highlights li::before{content:"•";margin-right:8px;color:var(--blue);}
.actions{margin-top:12px;}
.btn{display:inline-flex;align-items:center;justify-content:center;padding:12px 24px;border-radius:16px;font-weight:600;font-size:1rem;text-decoration:none;transition:.2s;}
.btn.primary{background:var(--accent);color:#fff;box-shadow:0 10px 30px rgba(27,91,255,.35);} 
.btn.secondary{background:#eef2ff;color:var(--blue);}
.btn.secondary.active{background:rgba(28,91,255,.15);color:var(--navy);}
.btn.secondary.danger{color:#b91c1c;background:rgba(185,28,28,.12);}
.btn:disabled{opacity:.4;pointer-events:none;}
.card{background:var(--panel);border-radius:28px;padding:32px;box-shadow:0 30px 90px rgba(12,38,85,.12);} 
.formShell{background:#fff;border-radius:30px;padding:32px;box-shadow:0 35px 90px rgba(12,38,85,.12);text-align:left;display:flex;flex-direction:column;gap:20px;}
.formGrid{display:grid;grid-template-columns:repeat(auto-fit,minmax(220px,1fr));gap:14px;}
.formGrid label{display:flex;flex-direction:column;font-weight:600;color:var(--muted);gap:6px;}
.formGrid input,.formShell textarea{border:1px solid var(--line);border-radius:14px;padding:10px 12px;font-size:1rem;font-family:inherit;}
.formShell textarea{min-height:160px;resize:vertical;}
header.app{display:flex;flex-wrap:wrap;gap:12px;align-items:center;justify-content:space-between;margin-bottom:24px;}
header.app h2{margin:0;font-size:2rem;}
.navButtons{display:flex;flex-wrap:wrap;gap:12px;}
.stats{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:12px;margin-bottom:24px;}
.statCard{background:#f7f9ff;border:1px solid var(--line);border-radius:20px;padding:16px;text-align:center;}
.statCard span{display:block;font-size:0.8rem;text-transform:uppercase;color:var(--muted);letter-spacing:.05em;}
.statCard strong{font-size:1.6rem;color:var(--navy);}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:20px;}
#caGrid{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));}
.folder{background:#fff;border:1px solid var(--folder-soft,var(--line));border-radius:26px;padding:22px;display:flex;flex-direction:column;gap:10px;box-shadow:0 18px 60px rgba(15,30,72,.12);cursor:pointer;--accent:var(--folder-color,var(--blue));}
.folderIcon{width:90px;height:66px;border-radius:20px;background:var(--folder-soft,rgba(28,91,255,.12));display:flex;align-items:center;justify-content:center;font-size:2rem;color:var(--folder-color,var(--blue));}
.folderTitle{font-size:1.2rem;font-weight:700;color:var(--folder-color,var(--navy));} 
.folderMeta{color:var(--muted);}
.folderActions{display:flex;flex-wrap:wrap;gap:10px;margin-top:8px;}
.caList{display:flex;flex-direction:column;gap:8px;margin-top:10px;}
.caItem{background:#f6f8ff;border:1px solid #dbe4ff;border-radius:14px;padding:10px;display:flex;justify-content:space-between;align-items:center;gap:10px;}
.caItem span{font-weight:600;color:var(--navy);}
.tableWrapper{overflow:auto;border-radius:22px;border:1px solid var(--line);}
table{width:100%;border-collapse:separate;border-spacing:0;}
thead th{position:sticky;top:0;background:#f1f4ff;border-bottom:2px solid var(--line);padding:8px;font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:.05em;}
tbody td{padding:8px;border-bottom:1px solid var(--line);} 
table input,table textarea{width:100%;border:1px solid var(--line);border-radius:8px;padding:4px 6px;font-size:0.9rem;font-family:inherit;}
table textarea{min-height:40px;resize:vertical;}
.groupPicker{width:auto;min-width:70px;max-width:110px;border:1px solid var(--line);border-radius:8px;padding:4px 6px;background:rgba(248,251,255,.95);font-weight:600;text-align:center;}
tbody tr.grouped td{background:var(--group-bg);}
tbody tr.groupStart td{border-top:4px solid var(--group-sep);}
.status{font-weight:600;}
.status.success{color:#15803d;}
.status.warning{color:#b45309;}
.status.danger{color:#b91c1c;}
.modal{position:fixed;inset:0;background:var(--modal-scrim);display:flex;align-items:center;justify-content:center;padding:20px;z-index:99;}
.modalCard{background:var(--panel);border-radius:28px;padding:28px;width:min(820px,100%);max-height:90vh;overflow:auto;box-shadow:0 35px 120px rgba(10,20,40,.45);color:var(--navy);}
.modalCard.large{width:min(960px,100%);}
.modalHeader{display:flex;align-items:center;justify-content:space-between;gap:12px;}
.iconButton{border:none;background:rgba(15,23,42,.08);width:40px;height:40px;border-radius:50%;font-size:1.4rem;cursor:pointer;color:var(--muted);}
.iconButton:hover{background:rgba(15,23,42,.15);}
.criteriaList{display:flex;flex-direction:column;gap:12px;margin-top:12px;}
.criteriaCard{border:1px solid var(--line);border-radius:18px;padding:16px;text-align:left;background:#fdfdff;}
.criteriaCard input,.criteriaCard select,.criteriaCard textarea{width:100%;border:1px solid var(--line);border-radius:12px;padding:8px 10px;font-size:0.95rem;}
.criteriaCard textarea{min-height:60px;}
.criteriaHeader{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px;}
.baseFieldsPanel{text-align:left;margin:12px 0;}
.baseFieldsPanel h3{margin:0 0 6px;font-size:1rem;color:var(--muted);}
.baseFieldGrid{display:flex;flex-wrap:wrap;gap:8px;}
.baseFieldItem{display:inline-flex;align-items:center;gap:8px;padding:8px 12px;border-radius:14px;border:1px solid var(--line);background:#f5f7ff;font-weight:600;color:var(--navy);}
.baseFieldGrid p{margin:6px 0 0;width:100%;color:var(--muted);font-size:0.9rem;}
.baseFieldItem input{width:auto;}
.scoreRow{display:flex;align-items:center;justify-content:space-between;gap:12px;margin:6px 0;}
.scoreRow input{max-width:100px;text-align:center;}
.levelSelect{width:100%;border-radius:10px;padding:4px 8px;border:1px solid var(--line);background:#fff;transition:.2s ease;color:var(--navy);}
.levelSelect[data-level=\"peak\"]{background:#064e3b;color:#ecfdf5;border-color:#15803d;}
.levelSelect[data-level=\"mid\"]{background:#dcfce7;color:#065f46;border-color:#86efac;}
.levelSelect[data-level=\"warn\"]{background:#fff7ed;color:#9a3412;border-color:#fdba74;}
.levelSelect[data-level=\"low\"]{background:#fee2e2;color:#991b1b;border-color:#fca5a5;}
.levelSelect[data-level=\"\"]{background:#fff;color:var(--navy);border-color:var(--line);}
.levelSelect:focus{outline:2px solid var(--accent);}
.table-only header.app,.table-only .stats,.table-only .navButtons{display:none;}
.table-only .card-full{padding:12px;}
.hidden{display:none!important;}
.featureGrid{width:min(1200px,100%);margin:40px auto 0;display:grid;grid-template-columns:repeat(auto-fit,minmax(240px,1fr));gap:20px;}
.featureCard{background:#fff;border-radius:28px;padding:24px;text-align:left;border:1px solid rgba(12,38,85,.06);box-shadow:0 20px 60px rgba(12,38,85,.08);}
.featureCard h3{margin:0 0 8px;font-size:1.2rem;color:#0b1c47;}
.featureCard p{margin:0;color:var(--muted);}
