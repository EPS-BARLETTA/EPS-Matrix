<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>EPS Matrix â€“ Mode dâ€™emploi</title>
  <script>
    (function(){
      try{
        const stored = localStorage.getItem('eps.matrix.theme');
        if(stored){ document.documentElement.dataset.theme = stored; }
      }catch(_e){}
    })();
  </script>
  <link rel="stylesheet" href="styles.css" />
  <script defer src="theme.js"></script>
</head>
<body class="helpPage">
  <button class="themeToggle" id="themeToggle" aria-label="Mode nuit">ğŸŒ™</button>
  <main class="card-full helpShell">
    <header class="app">
      <div>
        <h2>Mode dâ€™emploi EPS Matrix</h2>
        <p class="dragHint">Version du <span id="helpDate"></span></p>
      </div>
      <div class="navButtons">
        <a class="btn btn-success" href="hub.html">â† Retour hub</a>
        <a class="btn secondary" href="classes.html">Mes classes</a>
      </div>
    </header>
    <section class="helpGrid">
      <article class="helpCard" data-tone="blue">
        <button type="button" class="helpCardButton" data-target="card-create-class">CrÃ©er une classe</button>
        <div class="helpContent" id="card-create-class">
          <ol>
            <li>Depuis le hub, touche Â«â€¯AccÃ©der Ã  mes classesâ€¯Â» puis Â«â€¯CrÃ©er une classeâ€¯Â».</li>
            <li>Colle la liste brute Â«â€¯Nom PrÃ©nomâ€¯Â»â€¯: EPS Matrix nettoie en PrÃ©nom + initiale.</li>
            <li>Ajoute la couleur, le niveau et câ€™est prÃªt.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="green">
        <button type="button" class="helpCardButton" data-target="card-add-students">Ajouter des Ã©lÃ¨ves</button>
        <div class="helpContent" id="card-add-students">
          <ol>
            <li>Dans la classe, clique Â«â€¯CrÃ©er une Ã©valuationâ€¯Â» â†’ les Ã©lÃ¨ves sont importÃ©s automatiquement.</li>
            <li>Besoin dâ€™ajouter quelquâ€™unâ€¯? utilise Â«â€¯+ Ã‰lÃ¨veâ€¯Â» ou importe un CSV (nom, prÃ©nom, student_id).</li>
            <li>EPS Matrix attribue un identifiant unique pour sÃ©curiser les imports.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="orange">
        <button type="button" class="helpCardButton" data-target="card-create-eval">CrÃ©er une Ã©valuation</button>
        <div class="helpContent" id="card-create-eval">
          <ol>
            <li>Choisis un champ CA1â€‘CA5 (ou Bloc note) dans la classe.</li>
            <li>Configure les critÃ¨res, options et pondÃ©rations dans Â«â€¯Configurer / Notationâ€¯Â».</li>
            <li>Active la note /20 si besoin, puis saisis les niveaux directement dans le tableau.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="pink">
        <button type="button" class="helpCardButton" data-target="card-groups">Attribuer un groupe (terrains)</button>
        <div class="helpContent" id="card-groups">
          <ol>
            <li>Dans lâ€™Ã©valuation, colonne Â«â€¯Groupeâ€¯Â» = terrain actuel (1..20).</li>
            <li>Utilise Â«â€¯Initialiser le classementâ€¯Â» pour rÃ©partir automatiquement les prÃ©sents.</li>
            <li>ABS/DISP vont automatiquement dans Â«â€¯Hors terrainâ€¯Â».</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="teal">
        <button type="button" class="helpCardButton" data-target="card-terrain-scores">Mode terrainâ€¯: saisir les scores</button>
        <div class="helpContent" id="card-terrain-scores">
          <ol>
            <li>Active Â«â€¯Mode terrainâ€¯Â», puis touche Â«â€¯Saisir scoreâ€¯Â» sur la carte terrain.</li>
            <li>Renseigne les deux scores (A vs B) ou active Â«â€¯Abandonâ€¯Â».</li>
            <li>Chaque carte affiche lâ€™arbitre, le statut et un bouton Â«â€¯Corrigerâ€¯Â» tant que la rotation nâ€™est pas validÃ©e.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="purple">
        <button type="button" class="helpCardButton" data-target="card-rotation">Rotation suivante</button>
        <div class="helpContent" id="card-rotation">
          <ol>
            <li>Quand tous les matches sont Â«â€¯TerminÃ©â€¯Â», le bouton Â«â€¯Rotation suivanteâ€¯Â» sâ€™active.</li>
            <li>Le gagnant monte dâ€™un terrain (et devient arbitre), le perdant descend, lâ€™ancien arbitre rejoue.</li>
            <li>Les entrants du round suivant sont prioritaires pour affronter lâ€™arbitre du terrain oÃ¹ ils arrivent.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="red">
        <button type="button" class="helpCardButton" data-target="card-forfeit">Abandon / Forfait</button>
        <div class="helpContent" id="card-forfeit">
          <ol>
            <li>Active le toggle Â«â€¯Abandonâ€¯Â» sur la carte du match.</li>
            <li>Choisis qui abandonneâ€¯: le match passe immÃ©diatement Â«â€¯TerminÃ© â€“ Forfaitâ€¯Â».</li>
            <li>Le journal et le bilan Ã©lÃ¨ve indiquent automatiquement la mention â€œFORFAITâ€.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="indigo">
        <button type="button" class="helpCardButton" data-target="card-undo">Annuler la derniÃ¨re rotation</button>
        <div class="helpContent" id="card-undo">
          <ol>
            <li>AprÃ¨s Â«â€¯Rotation suivanteâ€¯Â», le bouton Â«â€¯Annuler la derniÃ¨re rotationâ€¯Â» devient actif.</li>
            <li>Un tap restaure les terrains, rÃ´les, scores et historiques du round prÃ©cÃ©dent.</li>
            <li>Modifie ce quâ€™il faut, puis relance Â«â€¯Rotation suivanteâ€¯Â».</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="yellow">
        <button type="button" class="helpCardButton" data-target="card-results">RÃ©sultats & bilan Ã©lÃ¨ve</button>
        <div class="helpContent" id="card-results">
          <ol>
            <li>Section Â«â€¯Mode terrain â€“ RÃ©sultatsâ€¯Â»â€¯: classement triÃ© (points, victoires, terrain, nom).</li>
            <li>Touche une ligne pour ouvrir la fiche Ã©lÃ¨ve (matchs, scores, abandons, notes libres).</li>
            <li>Export CSV dÃ©diÃ© disponible pour partager le podium.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="gray">
        <button type="button" class="helpCardButton" data-target="card-backup">Sauvegarder / restaurer</button>
        <div class="helpContent" id="card-backup">
          <ol>
            <li>Â«â€¯Sauvegarder mes classesâ€¯Â» = backup complet (.epsbackup.json). Â«â€¯Sauvegarder la classeâ€¯Â» = classe seule.</li>
            <li>Import non destructifâ€¯: si une classe existe dÃ©jÃ , elle est dupliquÃ©e avec le suffixe â€œ(restaurÃ©e JJ-MM)â€.</li>
            <li>Depuis iPad, stocke les fichiers dans Fichiers â€º iCloud pour pouvoir vider le cache en toute sÃ©rÃ©nitÃ©.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="brown">
        <button type="button" class="helpCardButton" data-target="card-abs">ABS / DISP</button>
        <div class="helpContent" id="card-abs">
          <ol>
            <li>Les boutons ABS/DISP du tableau grisent la ligne et envoient lâ€™Ã©lÃ¨ve hors terrain.</li>
            <li>Exporter CSV ajoute deux colonnes (<code>absent</code>, <code>dispense</code>) utilisables Ã  lâ€™import.</li>
            <li>En mode terrain, seuls les prÃ©sents apparaissent dans les matches.</li>
          </ol>
        </div>
      </article>
      <article class="helpCard" data-tone="aqua">
        <button type="button" class="helpCardButton" data-target="card-tips">Astuces terrain</button>
        <div class="helpContent" id="card-tips">
          <ul>
            <li>Pense Ã  ajouter le lien help.html Ã  ton Ã©cran dâ€™accueil iPad pour un accÃ¨s instantanÃ©.</li>
            <li>Active Â«â€¯Plein Ã©cranâ€¯Â» avant une saisie intenseâ€¯: la table gagne en lisibilitÃ©.</li>
            <li>Utilise le Pencil pour switcher stylet/gomme dâ€™un simple double-tap, EPS Matrix suit la config systÃ¨me.</li>
          </ul>
        </div>
      </article>
    </section>
  </main>
  <script>
    const label = new Date().toLocaleDateString('fr-FR',{day:'2-digit',month:'2-digit',year:'numeric'});
    const target = document.getElementById('helpDate');
    if(target){ target.textContent = label; }
    document.querySelectorAll('.helpCardButton').forEach((btn)=>{
      btn.addEventListener('click', ()=>{
        const card = btn.closest('.helpCard');
        const content = document.getElementById(btn.dataset.target);
        if(!card || !content) return;
        const isOpen = card.classList.toggle('open');
        content.hidden = !isOpen;
      });
    });
    document.querySelectorAll('.helpContent').forEach((content)=>content.hidden = true);
  </script>
</body>
</html>
